@page
@model CIDM3312_FINALPROJECT.Pages.Tickets.EditModel
@using CIDM3312_FINALPROJECT.Models

@{
    ViewData["Title"] = "Edit";
}

<h1>Edit Ticket</h1>

<dt class="col-sm-2">&nbsp;</dt> <!-- Add an empty dt element for spacing -->

@if (Model.Ticket != null)
{
    <div>
        <form method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="Ticket!.TicketID" />

            <div class="form-group">
                <label asp-for="Ticket!.Status" class="control-label"></label>
                <select asp-for="Ticket!.Status" class="form-control">
                    <option value="Open">Open</option>
                    <option value="In Progress">In Progress</option>
                    <option value="Resolved">Resolved</option>
                    <option value="Closed">Closed</option>
                </select>
                <span asp-validation-for="Ticket!.Status" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Ticket!.Priority" class="control-label"></label>
                <select asp-for="Ticket!.Priority" class="form-control">
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                </select>
                <span asp-validation-for="Ticket!.Priority" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Ticket!.Type" class="control-label"></label>
                <select asp-for="Ticket!.Type" class="form-control">
                    <option value="Technical">Technical</option>
                    <option value="Billing">Billing</option>
                    <option value="General">General</option>
                </select>
                <span asp-validation-for="Ticket!.Type" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Ticket!.Description" class="control-label"></label>
                <textarea asp-for="Ticket!.Description" class="form-control"></textarea>
                <span asp-validation-for="Ticket!.Description" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Ticket!.CustomerId" class="control-label"></label>
                <select asp-for="Ticket!.CustomerId" class="form-control">
                    @foreach (var customer in Model.Customers!)
                    {
                        <option value="@customer.Id">@($"{customer.FirstName} {customer.LastName}")</option>
                    }
                </select>
                <span asp-validation-for="Ticket!.CustomerId" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Ticket!.Management" class="control-label"></label>
                <input asp-for="Ticket!.Management" class="form-control" />
                <span asp-validation-for="Ticket!.Management" class="text-danger"></span>
            </div>

            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
                <a asp-page="./Index" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
}
else
{
    <p>Unable to retrieve the ticket details.</p>
}

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
